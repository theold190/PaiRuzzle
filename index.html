<!DOCTYPE html>
<head>
	<script type="text/javascript" src="js/crafty.js"></script>
	<script type="text/javascript" src="js/utils.js"></script>
	<script type="text/javascript" src="js/board.js"></script>
	<script type="text/javascript" src="js/card.js"></script>
	<script type="text/javascript" src="js/game.js"></script>
	<script type="text/javascript" src="js/status.js"></script>
	<script type="text/javascript" src="js/screens.js"></script>
</head>

<script type="text/javascript">
  window.onload = (function() {
    var qsParm = new Array();
    qsParm['debug'] = 0;
    parseQueryString(qsParm);
    Crafty.init(BOARD_WIDTH+200, BOARD_HEIGHT);

    DEBUG=qsParm['debug'] != 0;
    if (qsParm['skin'] != undefined) {
    LIST_OF_SKINS = [qsParm['skin']];
    } else {
        LIST_OF_SKINS = ["ComHazzle", "Social", "PuTris"];
    }

    // Dirty hack to preload all images
    var skinImages = [];
    for (var i=0; i<LIST_OF_SKINS.length; i++) {
        for (var j=0; j<8; j++) {
            skinImages.push("img/"+LIST_OF_SKINS[i]+"/front"+j+".png");
        }
        skinImages.push("img/"+LIST_OF_SKINS[i]+"/cover.png");
        skinImages.push("img/"+LIST_OF_SKINS[i]+"/background_final.png");
        skinImages.push("img/"+LIST_OF_SKINS[i]+"/background.png");
    }
    Crafty.load(skinImages,
        function() {
            var game = Crafty.e("Game")._start();
        }
    );
  });
</script>

<body>
  <table>
    <tr>
    </tr>
    <tr>
      <td><div id="cr-stage"></div></td>
    </tr>
  </table>
</body>
</html>
